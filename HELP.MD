Здесь приведено описание проекта `tf-data-analysis-lessons`.
Общее описание интеграции с образовательной платформой
приведено в [README.MD](README.MD).

Этот проект позволяет решить дву базовые проблемы интеграции GitHub Actions с edu платформой:
* отсутствие вариантов;
* отсутствие способов дать обратную связь.
Для обоих решений используется интеграция с Telegram-ботом (текущий: [@TFDataAnalysisBot](https://web.telegram.org/k/#@TFDataAnalysisBot)),
с помощью которого бот:
* получает условие ДЗ;
* получает обратную связь по ДЗ.

## Вгляд студента

### Получение условия

1. Пишем боту.
2. Тыкаем на меню бота.
3. Выбираем условие нужной задачи.
4. Бот присылает условие, форматы входных и выходных данных, критерии оценивания.

### Решение задачи

1. Решаем задачу на листочке.
2. Fork'аем пример решённого базового варианта (ссылка будет в описании задачи).
3. Реализуем задачу в `solution.py` (можно в самом интерфейсе GitHub).
4. Пишем боту `/get_chat`.
5. Указываем ID в коде решения.
6. Отпрвляем ссылку на Fork'нутый проект в ДЗ.
7. Через некоторое решение получаем фидбэк по проверенному ДЗ.

## Взгляд преподавателя

### Базовая подготовка

Для работы проекта нужно определить 
несколько [переменных среды](https://github.com/Xapulc/tf-data-analysis-lessons/settings/secrets/actions):
* `SOLVER_RANDOM_STATE` - строка, влияющая на варианты и вариации вариантов, выдаваемые студентам;
* `TELEGRAM_TOKEN` - токен Telegram-бота.
Если они определены, не трогайте их!

При проверке ДЗ GitHub запускает отдельный процесс ([app.py](app.py)) в собственной инфраструктуре,
поэтому ничего дополнительно запускать не нужно.

Для получения условия ДЗ и получения собственного идентификатора 
нужно отдельно поднимать бота (один раз, поэтому проверьте, что он не поднят).
Для начала установите все пакеты для Python командой
```
pip install -r requirements.txt
```

Для работы бота нужно установить latex.
На ubuntu:
```
sudo apt-get update
sudo apt-get install texlive-latex-base
sudo apt-get install texlive-latex-extra
sudo apt-get install texlive-lang-cyrillic
sudo apt-get install texlive-luatex
sudo apt-get install texlive-fonts-recommended
```

### Общая структура проекта

* [task1.yaml](.github/workflows/task1.yaml) - `yaml` файл для edu.
* [app.py](app.py) - приложение для проверки работы студента.
* [bot.py](bot.py) - бот для получения условия и Chat ID.
* [requirements.txt](requirements.txt) - список необходимых для Python библиотек.
* [tools](tools) - модуль с интрументами проекта.
* Остальные папки - условия заданий.

### Структура задач

* Каждой задаче в edu соответствует задача в проекте.
* Одна задача - один модуль.
* В каждой задаче может быть несколько вариантов (отдельные подмодули внутри модуля задачи).

На уровне варианта определяются следующие сущности.
* Объект класса `ProblemVariant`, содержащий основные характеристики варианта.
* Реализация абстрактного класса `VariantTransformer`.
  * `get_description` - индивидуальное условие задачи.
  * `get_sample` - получение выборки, соответствующей условию.
  * Функции, реализующие стандартные решения задачи.

На уровне задачи определяются следующие сущности.
* Объект класса `Problem`, содержащий основные характеристики задачи.
* Реализация абстрактного класса `SolutionTester`.
  * `get_code` - код задачи (=`problem.code`).
  * `generate_criteria` - автогенерация критериев задачи по идеальным решениям.
  * `check_solution` - составление артефактов при проверке задания.
* Реализация абстрактного класса `DescriptionGenerator`. 
  * `get_code` - код задачи (=`problem.code`).
  * `get_description` - составление индивидуального условия задачи.
* Реализация абстрактного класса `Result`.
  * `get_code` - код задачи (=`problem.code`).
  * `generate` - фидбэк по решению.
