Проект для автоматической проверки 
домашних заданий в рамках курсов [Тинькофф Образование](https://edu.tinkoff.ru/).
Он позволяет:
* генерировать разные варианты ДЗ для одной задачи;
* автоматически проверять ДЗ;
* присылать студенту подробную ОС по его ДЗ.

Ниже дано общее описание проекта-интеграции с образовательной платформой.
Подробное описание этого проекта находится в файле [HELP.MD](HELP.MD).

# Как использовать

Общая инструкция по интеграции Github Actions с образовательной платформой 
доступна [здесь](https://edu.tinkoff.ru/assets/github-instruction.pdf).
Далее приведена подробная инструкция по использованию этого проекта.

## Создание задания на платформе

На платформе edu в модуле можно создать блок "Практика",
далее создать новый "Экзамен",
в рамках которого создать "Задачу"
типа "Github Actions".
Такие задачи автоматически проверяются 
с помощью вашего проекта на Github.

Для задачи вам потребуется три вещи:
* проект на Github для проверки заданий;
* токен для доступа к проектам;
* проект-пример для учащихся.

### Проект для проверки заданий

Вам нужно сделать Fork [стандартного проекта](https://github.com/ci-adapter/example)
или этого. Главное:
* иметь файл `.github/workflows/task1.yaml`;
* сделать проект Private (открываем репозиторий, дальше Settings, листаем вниз и меняем на Private).

Содержание `.yaml` файла подробно описано в [документации](https://edu.tinkoff.ru/assets/github-instruction.pdf).

Ссылку на проект в виде `https://github.com/{your account}/{your repository}`
укажите в задании на edu.

### Токен для доступа к проектам

1. Заходим [сюда](https://github.com/settings/tokens).
2. Нажимаем `Generate new token (classic)`.
3. Раздаём права как в [документации](https://edu.tinkoff.ru/assets/github-instruction.pdf). 

Полученный токен из 40 символов скопируйте в задание.

### Проект-пример для учащихся

Ответом студента на задание является ссылка на проект 
в формате `https://github.com/{student account}/{student repository}`.
Для упрощения работы студенту нужно позволить 
копировать Public проект-пример.
Проект-пример сильно зависит от вашей задачи,
он может быть индивидуальным для каждой задачи,
в качестве примера можете использовать:
* https://github.com/ci-adapter/repo-for-cloning;
* https://github.com/Xapulc/tf-data-analysis-stat-task1-example.

Для проверки своих же задач можете сделать копию
своего проекта-примера и сделать его Private.
Для того, чтобы проверить правильность своего же решения,
проделайте следующие шаги:
1. реализуйте код задачи как студент;
2. смените видимость проекта на Public;
3. пройдите по ссылке на курс под нерабочей учётке;
4. откройте задание;
5. вставьте в качестве ответа ссылку на свой репозиторий;
6. откройте ссылку `https://github.com/{your account}/{your project with tests}/actions`;
7. дождитесь отработки задания;
8. после тестирования своего решения верните проекту видимость Private.

## Реализация задачи на Github

### Настройка yaml файла
Речь будет идти о `.github/workflows/task1.yaml`.
Для одного репозитория этот файл один,
даже если он используется в разных заданиях edu.

Общее описание yaml файла есть 
у [Github](https://docs.github.com/ru/actions/learn-github-actions/understanding-github-actions#создание-примера-рабочего-процесса).
Лучше отталкиваться от примеров:
* [tf-data-analysis-lessons/.github/workflows/task1.yaml](https://github.com/Xapulc/tf-data-analysis-lessons/blob/main/.github/workflows/task1.yaml);
* [example/.github/workflows/go.yaml](https://github.com/ci-adapter/example/blob/main/.github/workflows/go.yaml).

Описание переменных есть в [документации](https://edu.tinkoff.ru/assets/github-instruction.pdf)
на слайде `Рассмотрим payload от EDU`.
Эти пять переменных являются переменными среды,
можно добавлять свои переменные среды
в Github Actions.
Кроме этого, переменной среды является `GITHUB_ENV`
- местоположение файла переменных среды.

Далее в `yaml` файле (к примеру, [этом](https://github.com/ci-adapter/example/blob/main/.github/workflows/go.yaml)) 
происходят следующие операции:
1. в блоках `Set up Go` и `Install dependences` объявление версии ЯП и установка зависимостей (лучше последние объявить в проекте-примере для студентов);
2. в блоке `Clone student repository` клонирование репозитория студента в папку `./student_work` (для этого к репозиторию студента должен быть доступ);
3. в блоке `Test` тестирование проекта студента.

По результату отработки скрипта-теста
в переменных среды
должны появиться:
* `task_score` - количество баллов, выставленное человеку за задание;
* `max_score` - максимальное количество баллов за задание (не понял на что влияет);
* `status` - какой-то статус по заданию, тоже не понял на что влияет.

Эти переменные среды передаются в конце `yaml` файла
в блоке `Hello edu, i'm coming for you`.
Это является выводом для `edu` платформы,
этот блок кода не менять.

### Проект для проверки заданий

Базово проект для проверки задачи должен:
* импортировать решение студента;
* проверить его;
* дописать `task_score`, `max_score` и `status` в файл, имеющий путь = значению переменной среды `GITHUB_ENV` 
(смотри пример [EduService](https://github.com/Xapulc/tf-data-analysis-lessons/blob/main/tools/notification.py)).

Проект может быть написан на любых ЯП.

Если проект выполняет проверку нескольких задач
из edu, то можно настраивать логику выполнения задачи,
используя переменную среду `task_id`.
Для конкретной задачи можно посмотреть её `ID`
в окне списка задач в экзамене.

### Проблематика интеграции

К сожалению, фидбэком для учащегося является только оценка за экзамен (даже не за задание).
Чтобы настроить письменный фидбэк человеку, 
нужно использовать обходные решения вроде Telegram бота,
что реализовано в этом проекте.

Так же в стандартном решении невозможны варианты.
Для этого можно использовать следующие решения:
* устный договор, что человек делает какой-то вариант + выложены условия всех вариантов;
* интеграция с другим интерфейсом, где человек будет получать задание только своего варианта, 
и в решении будет какой-то идентификатор его, 
полученный при получении варианта (это реализовано в этом проекте).
